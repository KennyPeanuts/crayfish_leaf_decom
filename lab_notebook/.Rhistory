setwd("~/current_research/crayfish_leaf_decom/lab_notebook")
leaf.initial <- read.table("./data/initial_leaf_mass.csv", header = T, sep = ",")
leaf.T1 <- read.table("./data/T1_leaf_mass.csv", header = T, sep = ",")
leaf.T2 <- read.table("./data/T2_leaf_mass.csv", header = T, sep = ",")
leaf.T3 <- read.table("./data/T3_leaf_mass.csv", header = T, sep = ",")
treat <- read.table("./data/tank_map.csv", header = T, sep = ",")
#### Merge treatment information
leaf.T1 <- merge(leaf.T1, treat, by.x = "BagTank", by.y = "tank")
leaf.T2 <- merge(leaf.T2, treat, by.x = "BagTank", by.y = "tank")
leaf.T3 <- merge(leaf.T3, treat, by.x = "BagTank", by.y = "tank")
### Calculate variables
#### Initial AFDM
initialDM <- leaf.initial$CrucLeafDM - leaf.initial$CrucMass
initialAM <- leaf.initial$CrucAM - leaf.initial$CrucMas
AFDM <- initialDM - initialAM
leaf.initial <- data.frame(leaf.initial, AFDM)
mean.initial.AFDM <- mean(AFDM)
#### T1 AFDM
T1DM <- leaf.T1$CrucLeafDM - leaf.T1$CrucMass
T1AM <- leaf.T1$CrucAM - leaf.T1$CrucMass
AFDM <- T1DM - T1AM
leaf.T1 <- data.frame(leaf.T1, AFDM)
#### T2 AFDM
T2DM <- leaf.T2$CrucLeafDM - leaf.T2$CrucMass
T2AM <- leaf.T2$CrucAM - leaf.T2$CrucMass
AFDM <- T2DM - T2AM
leaf.T2 <- data.frame(leaf.T2, AFDM)
#### T3 AFDM
T3DM <- leaf.T3$CrucLeafDM - leaf.T3$CrucMass
T3AM <- leaf.T3$CrucAM - leaf.T3$CrucMass
AFDM <- T3DM - T3AM
leaf.T3 <- data.frame(leaf.T3, AFDM)
### Analyze Mass Lost with time
# create a single data frame with the T1 - T3 AFDM
leaf.AFDM <- rbind(leaf.T1, leaf.T2, leaf.T3)
# convert to percent remaining in the tank
percAFDM.rem <- (leaf.AFDM$AFDM / mean.initial.AFDM) * 100
# calculate the time in the tank
date <- c(as.Date(leaf.T1$Date), as.Date(leaf.T2$Date), as.Date(leaf.T3$Date))
time.step <- c(rep("T1", 30), rep("T2", 30), rep("T3", 30))
# calculate the number of days elapsed
days.elapsed <- date - as.Date(leaf.initial$Date)[1]
# add calc variables to data frame
leaf.AFDM <- data.frame(leaf.AFDM, percAFDM.rem, days.elapsed)
#### Summarize AFDM by Day
head(leaf.AFDM)
leaf.AFDM
leaf.AFDM$days.elapsed
plot(percAFDM ~ days.elapsed, data = leaf.AFDM)
plot(percAFDM.rem ~ days.elapsed, data = leaf.AFDM)
plot(log(percAFDM.rem) ~ days.elapsed)
k <- lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])
abline(k)
summary(k)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
summary(k)
summary(k)$coefficients
summary(k)$coefficients[2, 4]
summary(k)$coefficients[2,]
summary(k)$coefficients[4,]
summary(k)$coefficients[1,]
summary(k)$coefficients[2, 1]
coef(summary(k))[2,]
coef(summary(k))[2, 1]
coef(summary(k))[days.elapsed[percAFDM.rem != 0], Estimate]
coef(summary(k))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- list(coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- list(coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"])
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
coef(summary(k))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k
leaf.initial <- read.table("./data/initial_leaf_mass.csv", header = T, sep = ",")
leaf.T1 <- read.table("./data/T1_leaf_mass.csv", header = T, sep = ",")
leaf.T2 <- read.table("./data/T2_leaf_mass.csv", header = T, sep = ",")
leaf.T3 <- read.table("./data/T3_leaf_mass.csv", header = T, sep = ",")
treat <- read.table("./data/tank_map.csv", header = T, sep = ",")
#### Merge treatment information
leaf.T1 <- merge(leaf.T1, treat, by.x = "BagTank", by.y = "tank")
leaf.T2 <- merge(leaf.T2, treat, by.x = "BagTank", by.y = "tank")
leaf.T3 <- merge(leaf.T3, treat, by.x = "BagTank", by.y = "tank")
### Calculate variables
#### Initial AFDM
initialDM <- leaf.initial$CrucLeafDM - leaf.initial$CrucMass
initialAM <- leaf.initial$CrucAM - leaf.initial$CrucMas
AFDM <- initialDM - initialAM
leaf.initial <- data.frame(leaf.initial, AFDM)
mean.initial.AFDM <- mean(AFDM)
#### T1 AFDM
T1DM <- leaf.T1$CrucLeafDM - leaf.T1$CrucMass
T1AM <- leaf.T1$CrucAM - leaf.T1$CrucMass
AFDM <- T1DM - T1AM
leaf.T1 <- data.frame(leaf.T1, AFDM)
#### T2 AFDM
T2DM <- leaf.T2$CrucLeafDM - leaf.T2$CrucMass
T2AM <- leaf.T2$CrucAM - leaf.T2$CrucMass
AFDM <- T2DM - T2AM
leaf.T2 <- data.frame(leaf.T2, AFDM)
#### T3 AFDM
T3DM <- leaf.T3$CrucLeafDM - leaf.T3$CrucMass
T3AM <- leaf.T3$CrucAM - leaf.T3$CrucMass
AFDM <- T3DM - T3AM
leaf.T3 <- data.frame(leaf.T3, AFDM)
### Analyze Mass Lost with time
# create a single data frame with the T1 - T3 AFDM
leaf.AFDM <- rbind(leaf.T1, leaf.T2, leaf.T3)
# convert to percent remaining in the tank
percAFDM.rem <- (leaf.AFDM$AFDM / mean.initial.AFDM) * 100
# calculate the time in the tank
date <- c(as.Date(leaf.T1$Date), as.Date(leaf.T2$Date), as.Date(leaf.T3$Date))
time.step <- c(rep("T1", 30), rep("T2", 30), rep("T3", 30))
# calculate the number of days elapsed
days.elapsed <- date - as.Date(leaf.initial$Date)[1]
# add calc variables to data frame
leaf.AFDM <- data.frame(leaf.AFDM, percAFDM.rem, days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- list(coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"])
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- c(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
return(k.list)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- c(k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- c(klist, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- c(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- c(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- c(k.list, k)
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
#for(i in tank)
lapply(k, coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"])
#k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
#k.list <-
#k.list <- c(k.list, k)
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- numeric(0)
k.list <- c(k.list, k)
return(k)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- numeric(0)
k.list <- c(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- numeric(0)
k.list <- list(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
k.list <- numeric(0)
for(i in tank)
k <- coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- list(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.list <- lapply(leaf.AFDM$BagTank, function(leaf.AFDM$percAFDM.rem, days.elapsed), coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"])
k.list <- lapply(leaf.AFDM$BagTank, function(percAFDM.rem, days.elapsed), coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"])
k.list <- lapply(BagTank, function(percAFDM.rem, days.elapsed), coef(summary(lm(log(percAFDM.rem[percAFDM.rem != 0]) ~ days.elapsed[percAFDM.rem != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"])
k.tank <- function(tank, mass, day) {
k.list <- numeric(0)
for(i in tank)
k <- coef(summary(lm(log(mass[mass != 0]) ~ day[mass != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- list(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
k.tank <- function(tank, mass, day) {
k.list <- numeric(0)
for(i in tank)
k <- coef(summary(lm(log(mass[mass != 0]) ~ day[mass != 0])))["days.elapsed[percAFDM.rem != 0]", "Estimate"]
k.list <- list(k.list, k)
return(k.list)
}
k.tank(leaf.AFDM$BagTank, leaf.AFDM$percAFDM.rem, leaf.AFDM$days.elapsed)
